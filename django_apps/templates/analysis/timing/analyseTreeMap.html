<!--
You are free to copy and use this sample in accordance with the terms of the
Apache license (http://www.apache.org/licenses/LICENSE-2.0.html)
-->

<!-- <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html> <!-- xmlns="http://www.w3.org/1999/xhtml" -->
<!--  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8"/> 
	<!-- <script src="{{ STATIC_URL }}js/jquery-1.8.2.js"></script>
    <script type="text/javascript" src="https://www.google.com/jsapi"></script> <!-- it takes it from the upper template(render.html) -->
    <script type="text/javascript">
	$(document).ready(function() {	
		//alert(e.pageX);
		$('#visualization').mousemove(function(e){
      		//$('#tooltipTopLine').html(e.pageX +', '+ e.pageY);
			$('#tooltip').css({
            		left: e.pageX - 405,
           			top: e.pageY - 220
        		});
   		});
	});

	google.load('visualization', '1', {packages: ['treemap'], callback:drawVisualization});
      function drawVisualization() {
		var treeData = {{ treeData|safe }};	
		var perDict = {{ perDict|safe }};
		var showtooltip = {{ tooltip|safe }}

        // Create and populate the data table.
        var data = google.visualization.arrayToDataTable(treeData);
      
        // Create and draw the visualization.
        var treemap = new google.visualization.TreeMap(document.getElementById('visualization'));

		google.visualization.events.addListener(treemap, 'onmouseover', function (e) {
			if(!showtooltip) return;

        	var algname = data.getValue(e.row, 0);
        	
	        // populate the tooltip with data
	        $('#tooltipTopLine').html(perDict[algname]);
	        //$('#tooltipBottomLine').html(totalService);
    	    // show the tooltip
        	$('#tooltip').show();
    	});
    	google.visualization.events.addListener(treemap, 'onmouseout', function (e) {
			if (!showtooltip) return;
       		// hide the tooltip
        	$('#tooltip').hide();
    	});

        treemap.draw(data, {
          minColor: 'red',
          midColor: '#ddd',
          maxColor: '#0d0',
          headerHeight: 15,
          fontColor: 'black',
          showScale: true});
      }
    </script>

<style type="text/css">
#tooltip {
    display: none;
    position: absolute;
	left: 50px;
	top: 20px;
    height: 2.5em;
    width: 60px;
    background-color: #FFFFFF;
    padding-left: 5px;
}
#tooltipTopLine {
    font-weight: bold;
}
#tooltipBottomLine {}
</style>

 <!--  </head>
  <body style="font-family: Arial;border: 0 none;"> -->
    <div id="visualization" style="width: 1060px; height: 700px;"></div>
  <!-- </body> -->

<div id="tooltip">
    <span id="tooltipTopLine"></span><br />
    <!-- <span id="tooltipBottomLine"></span> -->
</div>

<!-- </html> -->
