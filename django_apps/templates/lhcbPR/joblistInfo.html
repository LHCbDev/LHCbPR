{% extends "lhcbPR/base_template.html" %}

{% block title %} Job List {% endblock title %}

{% block head %}
<script type="text/javascript" src="http://www.google.com/jsapi"></script>
<script type="text/javascript">
google.load('visualization', '1', {packages: ['table']});

var job_data;

function drawVisualization() {
   // Create and populate the data table.
	var jobs = {{ jobs|safe }};

   job_data = google.visualization.arrayToDataTable(jobs);
   job_data.setColumnLabel(0, "Id");
   job_data.setColumnLabel(1, "Project");
   job_data.setColumnLabel(2, "Version");
   job_data.setColumnLabel(3, "Platform");
   job_data.setColumnLabel(4, "Options");
   job_data.setColumnLabel(5, "Start");
   job_data.setColumnLabel(6, "End");
   job_data.setColumnLabel(7, "Success");
   job_data_view = new google.visualization.DataView(job_data);
   job_data_view.setColumns([0,5,6,7]);

   // Create and draw the visualization.
   job_visualization = new google.visualization.Table(document.getElementById('left'));

   var cnfStyle = {
      oddTableRow : 'google-table-row',
      headerCell  : 'google-table-head'
   }

   job_visualization.draw(job_data_view, {
      allowHtml: true,
      width  : 600,
      height : 670,
      page   : 'event',
      pageSize: 16,
      pagingButtonsConfiguration: 'auto',
      chartArea: {
            left: 250,
            width: "50%"
      },
      alternatingRowStyle: true,
      cssClassNames: cnfStyle
   });

   google.visualization.events.addListener(job_visualization, 'select', handleJobs);
}

// Handler to set configuration info
function handleJobs()
{
   var selection = job_visualization.getSelection();
   var job_id = job_data.getValue(selection[0].row, 0);
}

google.setOnLoadCallback(drawVisualization);
</script>
{% endblock head %}

{% block script %}

$(document).ready(function () {
	$("#jobListMenu").attr('checked', 'checked').button("refresh");
	$('#tabs').tabs({ selected : -1 });
	$('#tabs').tabs('select', '#{{ active_tab }}tab');
   $("#job_info_head").append($("<label>").html("<h3>Job information: </h3>"));
});

{% endblock script %}

{% block stylecss %}

#main {
    width: 1200px;
    height: 700px;
}
#header {
    width: 1200px;
    height: 10px;
}
#left {
    width: 600px;
    height: 670px;
    float:left;
}
#right {
    height: 670px;
    overflow: hidden;
}
#footer {
    width : 1200px;
    height: 20px;
}
.info-box-head {
    width : 550px;
    height: 30px;
}
.info-box {
    width : 550px;
    height: 400px;
    border: 1px solid black;
}
.info-box-links {
    width : 550px;
    height: 50px;
    border: 1px solid black;
}
.google-table-row {
   background-color: lightblue;
}
.google-table-head {
   background-color: skyblue;
   font-size: 12px;
   height: 20px;
}
.google-table td {
   font-size: 10px;
   height: 30px;
}

{% endblock stylecss %}

{% block helptext %} {% endblock helptext %}

{% block pagebody %}

<div id="tabs">
   <ul>
		<li><a id="AlltabButton" href="#Alltab">All</a></li>
   </ul>
   <div id="header"></div>
   <div id="main">
      <div id="left" class="google-table"></div>
      <div id="right" class="google-table">
         <table>
         <tr><td>
            <div id="job_info_head" class="info-box-head"> 
         </td></tr>
         <tr><td>
            <div id="job_info" class="info-box">
         </td></tr>
         <tr><td>
            <div id="job_links" class="info-box-links">
         </td></tr>
         </table>
      </div>
      <div id="cleaner"> 
   </div>
   <div id="footer"></div>
</div>

{% endblock pagebody %}
