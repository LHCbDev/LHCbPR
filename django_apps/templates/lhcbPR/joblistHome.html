{% extends "lhcbPR/base_template.html" %}

{% block title %} Job List {% endblock title %}

{% block head %}
<script type="text/javascript" src="http://www.google.com/jsapi"></script>
<script type="text/javascript">
google.load('visualization', '1', {packages: ['table']});
</script>
<script type="text/javascript">
function drawVisualization() {
   // Create and populate the data table.
	var cnfs = {{ configs|safe }};
	var jobs = {{ jobs|safe }};
	var cnf_desc = {{ cnf_description|safe }};
   cnf_data = google.visualization.arrayToDataTable(cnfs);
   cnf_data.setColumnLabel(0, "Project");
   cnf_data.setColumnLabel(1, "Version");
   cnf_data.setColumnLabel(2, "Platform");
   cnf_data.setColumnLabel(3, "Options");
   job_data = google.visualization.arrayToDataTable(jobs);

   // Create and draw the visualization.
   cnf_visualization = new google.visualization.Table(document.getElementById('configs'));
   job_visualization = new google.visualization.Table(document.getElementById('details'));
   cnf_visualization.draw(cnf_data, {
      width  : 700,
      height : 500,
      page   : 'enable',
      pageSize: 16,
      pagingSymbols: {prev: 'prev', next: 'next'},
      pagingButtonsConfiguration: 'auto',
      chartArea: {
            left: 250,
            width: "50%"
      },
      alternatingRowStyle: true
   });
   job_visualization.draw(job_data, {
      width  : 700,
      height : 500,
      page   : 'enable',
      pageSize: 16,
      pagingSymbols: {prev: 'prev', next: 'next'},
      pagingButtonsConfiguration: 'auto',
      chartArea: {
            left: 250,
            width: "50%"
      },
      alternatingRowStyle: true
   });
}

google.setOnLoadCallback(drawVisualization);
</script>
{% endblock head %}

{% block script %}

$(document).ready(function () {
	$("#jobListMenu").attr('checked', 'checked').button("refresh");
	$('#tabs').tabs({ selected : -1 });
	$('#tabs').tabs('select', '#{{ active_tab }}tab');
});

{% endblock script %}

{% block stylecss %} {% endblock stylecss %}

{% block helptext %} {% endblock helptext %}

{% block pagebody %}

<div id="tabs">
   <ul>
      <li><a href="#jobs">Jobs</a></li>
   </ul>
   <div id="main" style="height: 700px">
      <div id="filter"  style="height: 50px">Choose configuration:</div>
      <div id="configs" style="height: 600px">
      <div id="diff_version" style="height: 100px; display: none;">
      <div id="details" style="height: 600px">
      <div id="cleaner"> 
   </div>
   <div id="footer"></div>
</div>

{% endblock pagebody %}
